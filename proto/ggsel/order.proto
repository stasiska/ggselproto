syntax = "proto3";

package order;

option go_package = "stasiska.order.v1;orderv1";


message OrderItem {
  string product_id = 1;   
  int32 count = 2;    
  int32 price = 3;         
}
message Order {
  string id = 1;                 
  string user_id = 2;            
  repeated OrderItem items = 3;  
  int32 total_price = 4;        
  string status = 5;             
  string created_at = 6;    
}



message CreateOrderRequest {
  string user_id = 1;
  repeated OrderItem items = 2;
}

message CreateOrderResponse {
  Order order = 1;
}

message GetOrderRequest {
  string id = 1;  
}

message GetOrderResponse {
  Order order = 1;
}

message OrdersRequest {
  int32 limit = 1;
  int32 offset = 2;
}

message OrdersResponse {
  repeated Order orders = 1;
}

message AddItemToOrderRequest {
  string order_id = 1;
  string product_id = 2;
  int32 count = 3;
  int32 price = 4;
}

message AddItemToOrderResponse {
  OrderItem item = 1;
}
service OrderService {
  rpc CreateOrder(CreateOrderRequest) returns (CreateOrderResponse);
  rpc AddItemToOrder(AddItemToOrderRequest) returns (AddItemToOrderResponse);
  rpc GetOrderById(GetOrderRequest) returns (GetOrderResponse);
  rpc GetOrders(OrdersRequest) returns (OrdersResponse);
}
